--- tcc-0.9.25/Makefile.orig	2009-05-18 16:27:06.000000000 +0200
+++ tcc-0.9.25/Makefile	2011-05-03 21:49:47.762551499 +0200
@@ -197,25 +197,25 @@
 
 ifndef CONFIG_WIN32
 install: $(PROGS) $(LIBTCC1) $(BCHECK_O) libtcc.a tcc.1 tcc-doc.html
-	mkdir -p "$(bindir)"
-	$(INSTALL) -s -m755 $(PROGS) "$(bindir)"
-	mkdir -p "$(mandir)/man1"
-	$(INSTALL) tcc.1 "$(mandir)/man1"
-	mkdir -p "$(tccdir)"
-	mkdir -p "$(tccdir)/include"
+	mkdir -p "$(DESTDIR)$(bindir)"
+	$(INSTALL) -s -m755 $(PROGS) "$(DESTDIR)$(bindir)"
+	mkdir -p "$(DESTDIR)$(mandir)/man1"
+	$(INSTALL) tcc.1 "$(DESTDIR)$(mandir)/man1"
+	mkdir -p "$(DESTDIR)$(tccdir)"
+	mkdir -p "$(DESTDIR)$(tccdir)/include"
 ifneq ($(LIBTCC1),)
-	$(INSTALL) -m644 $(LIBTCC1) "$(tccdir)"
+	$(INSTALL) -m644 $(LIBTCC1) "$(DESTDIR)$(tccdir)"
 endif
 ifneq ($(BCHECK_O),)
-	$(INSTALL) -m644 $(BCHECK_O) "$(tccdir)"
+	$(INSTALL) -m644 $(BCHECK_O) "$(DESTDIR)$(tccdir)"
 endif
-	$(INSTALL) -m644 $(addprefix include/,$(TCC_INCLUDES)) "$(tccdir)/include"
-	mkdir -p "$(docdir)"
-	$(INSTALL) -m644 tcc-doc.html "$(docdir)"
-	mkdir -p "$(libdir)"
-	$(INSTALL) -m644 libtcc.a "$(libdir)"
-	mkdir -p "$(includedir)"
-	$(INSTALL) -m644 libtcc.h "$(includedir)"
+	$(INSTALL) -m644 $(addprefix include/,$(TCC_INCLUDES)) "$(DESTDIR)$(tccdir)/include"
+	mkdir -p "$(DESTDIR)$(docdir)"
+	$(INSTALL) -m644 tcc-doc.html "$(DESTDIR)$(docdir)"
+	mkdir -p "$(DESTDIR)$(libdir)"
+	$(INSTALL) -m644 libtcc.a "$(DESTDIR)$(libdir)"
+	mkdir -p "$(DESTDIR)$(includedir)"
+	$(INSTALL) -m644 libtcc.h "$(DESTDIR)$(includedir)"
 
 uninstall:
 	rm -fv $(foreach P,$(PROGS),"$(bindir)/$P")
